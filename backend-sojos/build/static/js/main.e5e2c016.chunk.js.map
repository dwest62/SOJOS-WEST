{"version":3,"sources":["components/Blog.js","components/Toggable.js","components/Button.js","components/BlogToggable.js","components/Content.js","services/blogs.js","services/login.js","components/LoginForm.js","components/BlogForm.js","components/ErrorMessage.js","App.js","index.js"],"names":["Blog","title","author","Toggable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","onClick","buttonLabel","className","children","cancel","displayName","Button","text","BlogToggable","blog","user","addLikeOnClick","deleteOnClick","url","likes","username","name","Content","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","blogToggable","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","setToken","newToken","update","id","put","deleteBlog","delete","login","credentials","LoginForm","handleLogin","setUsername","password","setPassword","onSubmit","type","value","onChange","target","BlogForm","blogObject","newTitle","setNewTitle","newAuthor","setNewAuthor","newUrl","setNewUrl","event","preventDefault","ErrorMessage","message","App","blogs","setBlogs","setUser","errorMessage","setErrorMessage","setMessage","addBlogMessage","setAddBlogMessage","useEffect","blogService","fetchBlogs","loggedUserJSON","window","localStorage","getItem","JSON","parse","blogFormRef","useRef","addBlog","current","result","concat","setTimeout","loginService","console","log","setItem","stringify","handleAddLike","find","d","blogData","updatedBlog","changedBlog","map","filter","sort","b","blogA","blogB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e5e2c016.chunk.js","sourcesContent":["import React from 'react'\n\nconst Blog = ({ title, author }) =>{\n\n  return (\n    <div>\n      {title} {author}\n    </div>\n  )\n}\n\nexport default Blog","import React, { useState, useImperativeHandle } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Toggable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return{\n      toggleVisibility\n    }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible} className='toggableContent'>\n        {props.children}\n        <button onClick={toggleVisibility}>{props.cancel}</button>\n      </div>\n    </div>\n  )\n})\n\nToggable.propTypes = {\n  buttonLabel: PropTypes.string.isRequired\n}\n\nToggable.displayName = 'Toggable'\n\nexport default Toggable","import React from 'react'\n\nconst Button = ({ onClick, text }) => {\n  return (\n    <button onClick={onClick}>{text}</button>\n  )\n}\n\nexport default Button","import React from 'react'\nimport Toggable from './Toggable'\nimport Button from './Button'\n\nconst BlogToggable = ({ blog, user, addLikeOnClick, deleteOnClick }) => {\n\n  return(\n  <Toggable buttonLabel='view' cancel=\"hide\">\n    {\n      <div>\n        <div>\n          {blog.url}\n        </div>\n        <div>\n          {'likes: '}{blog.likes}{' '}<Button onClick={addLikeOnClick} text=\"like\"/>\n        </div>\n        <div>\n          {blog.user.username}\n        </div>\n        {blog.user.name === user\n          ? <div>\n            <Button onClick={deleteOnClick} text=\"remove\"/>\n          </div> : null\n        }\n      </div>\n    }\n  </Toggable>\n  )\n}\n\nexport default BlogToggable","import React from 'react'\nimport Blog from './Blog'\nimport BlogToggable from './BlogToggable'\n\nconst Content = ({ blog, addLikeOnClick, deleteOnClick, user }) => {\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n  \n  const props = {\n    blog:{\n      title:blog.title,\n      author: blog.author\n    },\n    blogToggable:{\n      blog:blog,\n      addLikeOnClick:addLikeOnClick,\n      user:user,\n      deleteOnClick:deleteOnClick\n    }\n  }\n  \n  return(\n    <div style={blogStyle} className={blogStyle}>\n      <Blog {... props.blog} />\n      <BlogToggable {... props.blogToggable} />\n    </div>\n  )\n}\n\nexport default Content","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = (newToken) => {\n  return(\n    token = `bearer ${newToken}`)\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = async (id, newObject) => {\n  const response = await axios.put(`${baseUrl}/${id}`,newObject)\n  return response.data\n}\n\nconst deleteBlog = async (id) => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = await axios.delete(`${baseUrl}/${id}`, config)\n  return response.data\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, setToken, update, deleteBlog }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async (credentials) => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\n\nexport default { login }","import React from 'react'\n\nconst LoginForm = ({\n  handleLogin,\n  username,\n  setUsername,\n  password,\n  setPassword }) => {\n\n  return (\n    <div>\n      <h2>Log in to application</h2>\n      <form onSubmit={handleLogin}>\n        <div>\n          username:{' '}\n          <input\n            id='username'\n            type=\"text\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          password: {' '}\n          <input\n            id='password'\n            type=\"password\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button id='login-button' type=\"submit\">login</button>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginForm","import React, { useState } from 'react'\n\nconst BlogForm = ({ blogObject }) => {\n  const [newTitle, setNewTitle] = useState('')\n  const [newAuthor, setNewAuthor] = useState('')\n  const [newUrl, setNewUrl] = useState('')\n\n  const handleAuthorChange = (event) => {\n    setNewAuthor(event.target.value)\n  }\n\n  const handleTitleChange = (event) => {\n    setNewTitle(event.target.value)\n  }\n\n  const handleUrlChange = (event) => {\n    setNewUrl(event.target.value)\n  }\n\n  const addBlog = (event) => {\n    event.preventDefault()\n    blogObject({\n      title:newTitle,\n      author:newAuthor,\n      url:newUrl\n    })\n    setNewAuthor('')\n    setNewTitle('')\n    setNewUrl('')\n  }\n  return (\n    <div className='formDiv'>\n      <h2>Create New</h2>\n      <form onSubmit={addBlog}>\n        <div>\n          title:{' '}\n          <input\n            id='title'\n            value={newTitle}\n            onChange={handleTitleChange} />\n        </div>\n        <div>\n          author:{' '}\n          <input\n            id='author'\n            value={newAuthor}\n            onChange={handleAuthorChange}/>\n        </div>\n        <div>\n          url:{' '}\n          <input\n            id='url'\n            value={newUrl}\n            onChange={handleUrlChange}/>\n        </div>\n        <div>\n          <button id='createBlog' type=\"submit\">create</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default BlogForm","import React from 'react'\n\nconst ErrorMessage = ({message}) =>{\n\n  if (message === null){\n    return null\n  }\n\n  return (\n    <div className='error'>\n      {message}\n    </div>\n  )\n}\n\nexport default ErrorMessage","import React, { useState, useEffect, useRef } from 'react'\nimport Content from './components/Content'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport LoginForm from './components/LoginForm'\nimport BlogForm from './components/BlogForm'\nimport Toggable from './components/Toggable'\nimport Button from './components/Button'\nimport ErrorMessage from './components/ErrorMessage'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [message, setMessage] = useState(null)\n  const [addBlogMessage, setAddBlogMessage] = useState(null)\n\n  useEffect( () => {\n    const fetchBlogs = async () => {\n      const blogs = await blogService.getAll()\n      setBlogs( blogs )}\n    fetchBlogs()\n  }, [])\n\n  useEffect( () => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if(loggedUserJSON !== 'null'){\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      if(user){\n        blogService.setToken(user.token)\n      }\n    }\n  }, [])\n\n  const blogFormRef = useRef() //Reference to BlogForm component hook\n\n  const addBlog = async (blogObject) => {\n    try {blogFormRef.current.toggleVisibility()\n      let blog = await blogService.create(blogObject)\n      const result = {\n        id:blog.id,\n        title:blog.title,\n        author:blog.author,\n        url:blog.url,\n        likes:blog.likes,\n        user:{ id:blog.user, name:user.name, username:user.username }\n      }\n      setBlogs(blogs.concat(result))\n      setAddBlogMessage(`a new blog ${blogObject.title} by ${blogObject.author || 'author unknown'} has been added!`)\n      setTimeout(() => {\n        setAddBlogMessage(null)\n      }, 5000)\n    } catch (exception) {\n      setAddBlogMessage('Error adding blog. Please ensure blog contains a valid title and url')\n      setTimeout(() => {\n        setAddBlogMessage(null)\n      }, 5000)\n    }\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      console.log(user,'user')\n      window.localStorage.setItem(\n        'loggedBlogappUser', JSON.stringify(user)\n      )\n      blogService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n      setMessage(`${user.name} is logged in`)\n    } catch (exception) {\n      setErrorMessage('Username or password is not valid')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setUsername('')\n      setPassword('')\n    }\n  }\n\n  const handleLogout = () => {\n    setUser(null)\n    window.localStorage.setItem(\n      'loggedBlogappUser', null\n    )\n  }\n\n  const handleAddLike = async (id) => {\n    const blog = blogs.find(d => d.id === id)\n    const blogData = blogs\n    const updatedBlog = {\n      user: blog.user ? blog.user.id : 'no user',\n      likes: blog.likes + 1,\n      title: blog.title,\n      url: blog.url\n    }\n    const response = await blogService.update(blog.id, updatedBlog)\n    const changedBlog = { ...blog, likes:response.likes }\n    setBlogs(blogData.map(data => data.id !== blog.id ? data : changedBlog))\n  }\n\n  const deleteBlog = async (id) => {\n    const blogData = blogs\n    console.log(id)\n    blogService.deleteBlog(id)\n    setBlogs(blogData.filter(data => data.id !== id))\n  }\n\n  const blogForm = () => (\n    <Toggable buttonLabel='create new blog' cancel=\"cancel\" ref={blogFormRef}>\n      <BlogForm blogObject={addBlog}/>\n    </Toggable>\n  )\n\n  const props = {\n    login: {\n      handleLogin: handleLogin,\n      username: username,\n      setUsername: setUsername,\n      password: password,\n      setPassword: setPassword,\n      errorMessage: errorMessage\n    }\n  }\n  console.log('userid', user)\n\n  const sortedBlogsByLikes = () =>\n    blogs.sort((a,b) => {\n      const blogA = a.likes\n      const blogB = b.likes\n      if (blogB < blogA) {\n        return -1\n      }\n      if (blogB > blogA) {\n        return 1\n      }\n      return 0\n    })\n\n  return (\n    <div>\n      {user === null\n        ? <div>\n          <LoginForm {...props.login} /> \n          <ErrorMessage message={errorMessage}/>\n        </div>\n        : <div>\n          <h2>blogs</h2>\n          <p>\n            <Button onClick={handleLogout} text='logout'/>{' '}{message || null}\n          </p>\n          <div>\n            {blogForm()}\n          </div>\n          {addBlogMessage}\n          {blogs\n            ? sortedBlogsByLikes().map(\n              blogs =>\n                <Content\n                  key={blogs.id}\n                  blog={blogs}\n                  addLikeOnClick={() => handleAddLike(blogs.id)}\n                  deleteOnClick={() => deleteBlog(blogs.id)}\n                  user={user.name}/>\n            )\n            : null}\n\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}